# Whitelist for intentional test errors
# Each entry must match ALL attributes exactly:
# - test: exact test name from "Running test: <name>"
# - error: error message suffix (without timestamp)
# - before: suffix of the line immediately before the error line (without timestamp)
# - after: suffix of the line immediately after the error line (without timestamp)
# Use empty string "" if before/after line should be ignored in matching
# Format:
#   - test: "exact_test_name"
#     error: "error_message_suffix"
#     before: "line_before_suffix"
#     after: "line_after_suffix"
#     comment: "Optional description of why this error is intentional"

intentional_errors:
  # Compile instruction evaluator tests
  - test: "ar_compile_instruction_evaluator_tests"
    error: "ERROR: Unknown instruction type (at position 0)"
    before: "DEBUG [FRAME_CREATE]: Creating frame with message type=2"
    after: "ERROR: Unknown parse error (at position 1)"
    comment: "Testing invalid instruction syntax in test_instruction_evaluator__evaluate_method_invalid_instructions"
  
  - test: "ar_compile_instruction_evaluator_tests"
    error: "ERROR: Unknown parse error (at position 1)"
    before: "ERROR: Unknown instruction type (at position 0)"
    after: "DEBUG [FRAME_CREATE]: Creating frame with message type=2"
    comment: "Testing invalid instruction parsing in test_instruction_evaluator__evaluate_method_invalid_instructions"

  # Interpreter fixture tests - testing error handling
  - test: "ar_interpreter_fixture_tests"
    error: "ERROR: Method evaluation failed at line 1"
    before: "ERROR: Failed to evaluate expression"
    after: "DEBUG: Message is provided to execute_method"
    comment: "Testing error handling in interpreter fixture tests"
  
  - test: "ar_interpreter_fixture_tests"
    error: "ERROR: Method evaluation failed"
    before: ""
    after: ""
    comment: "Testing general method evaluation failure handling"

  # Method AST errors during testing - these are intentional as tests exercise error conditions
  - test: ""
    error: "ERROR: Method has no AST"
    before: "DEBUG [INTERPRETER]: Executing method for agent 2 with message type=2"
    after: "DEBUG [INTERPRETER]: Executing method for agent 3 with message type=2"
    comment: "Testing method execution without AST"
    
  - test: ""
    error: "ERROR: Method has no AST"
    before: "DEBUG [INTERPRETER]: Executing method for agent 3 with message type=2"
    after: "ERROR: Failed to create execution frame"
    comment: "Testing method execution without AST"
    
  - test: ""
    error: "ERROR: Method has no AST"
    before: ""
    after: ""
    comment: "General AST missing errors during test execution - these are expected in test scenarios"
    
  # Parsing errors during test execution - these occur when testing error handling
  - test: ""
    error: "ERROR: Expected literal (string or number) (at position 0)"
    before: ""
    after: ""
    comment: "Testing parser error handling for invalid expressions"
    
  - test: ""
    error: "ERROR: Failed to parse argument expression"
    before: ""
    after: ""
    comment: "Testing parser error handling for invalid argument syntax"
    
  - test: ""
    error: "ERROR: Unknown parse error"
    before: ""
    after: ""
    comment: "Testing parser error handling for general parse failures"
    
  - test: ""
    error: "ERROR: Failed to create execution frame"
    before: ""
    after: ""
    comment: "Testing frame creation error handling"
    
  # File parsing errors during executable runs
  - test: ""
    error: "Error: Unexpected end of file"
    before: ""
    after: ""
    comment: "Testing handling of incomplete agency files"
    
  # Assignment instruction parser errors
  - test: ""
    error: "ERROR: Assignment target must start with 'memory.'"
    before: ""
    after: ""
    comment: "Testing assignment validation rules"
    
  - test: ""
    error: "ERROR: Expected ':=' operator"
    before: ""
    after: ""
    comment: "Testing assignment operator parsing"
    
  # Build instruction parser errors
  - test: ""
    error: "ERROR: Expected 'build' function"
    before: ""
    after: ""
    comment: "Testing build instruction parsing"
    
  - test: ""
    error: "ERROR: Expected '(' after 'build'"
    before: ""
    after: ""
    comment: "Testing build instruction syntax"
    
  - test: ""
    error: "ERROR: Failed to parse build arguments"
    before: ""
    after: ""
    comment: "Testing build argument parsing"
    
  # Compile instruction parser errors
  - test: ""
    error: "ERROR: Expected 'compile' function"
    before: ""
    after: ""
    comment: "Testing compile instruction parsing"
    
  - test: ""
    error: "ERROR: Expected '(' after 'compile'"
    before: ""
    after: ""
    comment: "Testing compile instruction syntax"
    
  - test: ""
    error: "ERROR: Failed to parse compile arguments"
    before: ""
    after: ""
    comment: "Testing compile argument parsing"