memory.spawn_result := spawn(message.method_name, message.version, message.context)
memory.exit_result := exit(message.agent_id)
memory.is_spawn := if(message.action = "spawn", 1, 0)
memory.is_exit := if(message.action = "exit", 1, 0)
memory.result := if(memory.is_spawn = 1, memory.spawn_result, 0)
memory.result := if(memory.is_exit = 1, memory.exit_result, memory.result)
send(message.sender, memory.result)
